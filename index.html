<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Portail Organisation administrative — République du Congo</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">

<style>
:root{
  --text:#eef5ff;
  --muted:rgba(238,245,255,.72);
  --line:rgba(255,255,255,.10);
  --radius:16px;
  --shadow:0 12px 30px rgba(0,0,0,.35);
  --bgA: rgba(11,18,32,.88);
  --panelBg: rgba(255,255,255,.03);
}

*{ box-sizing:border-box; }
html,body{ height:100%; margin:0; }

body{
  font-family: Arial, system-ui, sans-serif;
  background: linear-gradient(120deg,#071023,#0b1220);
  color:var(--text);
  overflow:hidden;
}

/* HEADER */
header{
  position:sticky;
  top:0;
  z-index:2100; /* FIX */
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:12px 16px;
  background:var(--bgA);
  border-bottom:1px solid var(--line);
}

.brand{ display:flex; gap:12px; align-items:center; }
.logoWrap{
  width:48px;height:48px;
  border-radius:12px;
  background:rgba(255,255,255,.06);
  display:flex;align-items:center;justify-content:center;
}
.logoWrap img{ max-width:36px;max-height:36px; }

.mobileMenuBtn{
  display:none;
  padding:10px 14px;
  border-radius:999px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.06);
  color:#fff;
  font-weight:700;
}

/* LAYOUT */
.wrap{
  display:grid;
  grid-template-columns:420px 1fr;
  height:calc(100vh - var(--header-h,72px));
}

aside{
  padding:12px;
  overflow:auto;
  background:var(--panelBg);
  border-right:1px solid var(--line);
}

.mapwrap{ display:flex;flex-direction:column; }
#map{ flex:1; }

/* MOBILE */
@media(max-width:900px){
  .wrap{ grid-template-columns:1fr; }
  aside{ display:none; }
  .mobileMenuBtn{ display:inline-block; }
}

/* OVERLAY */
.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.55);
  display:none;
  z-index:1900; /* FIX */
}
.overlay.show{ display:block; }

/* PANEL MOBILE */
.panelMobile{
  position:fixed;
  right:0;
  top:var(--header-h,72px); /* FIX */
  bottom:0;
  width:min(420px,92vw);
  background:rgba(11,18,32,.96);
  border-left:1px solid var(--line);
  transform:translateX(100%);
  transition:transform .25s ease;
  z-index:2000; /* FIX */
  padding:12px;
  overflow-y:auto; /* FIX */
  -webkit-overflow-scrolling:touch; /* FIX */
}
.panelMobile.open{ transform:translateX(0); }

.card{
  border:1px solid var(--line);
  border-radius:14px;
  padding:12px;
  margin-bottom:12px;
  background:rgba(0,0,0,.15);
}
.cardTitle{ font-weight:800;margin-bottom:8px; }
.check{ display:flex;gap:8px;margin-bottom:6px; }
.btn{
  display:inline-block;
  padding:8px 10px;
  border:1px solid var(--line);
  border-radius:10px;
  color:#fff;
  text-decoration:none;
  background:rgba(255,255,255,.05);
}
</style>
</head>

<body>

<header id="siteHeader">
  <div class="brand">
    <div class="logoWrap"><img src="assets/ign_logo.png"></div>
    <b>IGN Congo — Géoportail</b>
  </div>
  <button class="mobileMenuBtn" id="openPanelBtn">Menu</button>
</header>

<div class="wrap">
  <aside>
    <!-- Desktop menu intact -->
  </aside>

  <div class="mapwrap">
    <div id="map"></div>
  </div>
</div>

<div class="overlay" id="overlay"></div>

<aside class="panelMobile" id="panelMobile">
  <div class="card">
    <div class="cardTitle">Téléchargements</div>
    <a class="btn" href="#">SHP</a>
    <a class="btn" href="#">GeoJSON</a>
    <a class="btn" href="#">Metadata</a>
  </div>
</aside>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
/* Leaflet */
const map=L.map("map").setView([-1,15],6);
L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(map);

/* FIX HEADER HEIGHT */
function setHeaderHeight(){
  const h=document.getElementById("siteHeader").offsetHeight;
  document.documentElement.style.setProperty("--header-h",h+"px");
}
setHeaderHeight();
window.addEventListener("resize",setHeaderHeight);

/* MOBILE MENU */
const panel=document.getElementById("panelMobile");
const overlay=document.getElementById("overlay");

document.getElementById("openPanelBtn").onclick=()=>{
  panel.classList.add("open");
  overlay.classList.add("show");
  setTimeout(()=>map.invalidateSize(),200);
};

overlay.onclick=()=>{
  panel.classList.remove("open");
  overlay.classList.remove("show");
  setTimeout(()=>map.invalidateSize(),200);
};
</script>

</body>
</html>
